<!DOCTYPE html>
<html>

<head>
  <title>
    {{ listing.municipality }} {{ listing.rooms }} h
    {{ listing.size|float|int if listing.size|float == listing.size|float|int else listing.size|string|replace(".", ",") }} m²
    {{ listing.rent }} €
  </title>
</head>

<body>
  <h1>
    {{ listing.municipality }} {{ listing.rooms }} h
    {{ listing.size|float|int if listing.size|float == listing.size|float|int else listing.size|string|replace(".", ",") }} m²
    {{ listing.rent }} €
  </h1>

  {% if session.user_id == listing.user_id %}
  <p>
    <a href="/edit_listing/{{ listing.id }}">Muokkaa</a>
    <a href="/remove_listing/{{ listing.id }}">Poista</a>
  </p>
  {% endif %}

  <p>
    Ilmoittaja: <a href="/user/{{listing.user_id}}">{{ listing.username }}</a>
  </p>
  <p>Tykkäyksiä: {{ likes.likes }}</p>

  {% if session.user_id %}
    <form action="/toggle_like/{{ listing.id }}" method="post">
      {% if likes.liked %}
        <button type="submit">Poista tykkäys</button>
      {% else %}
        <button type="submit">Tykkää</button>
      {% endif %}
    </form>
  {% endif %}

  <h3>Asunnon tiedot</h3>

  <p>
    Asuntotyyppi: {{ listing.property_type }}
  </p>
  <p>
    Huonemäärä: {{ listing.rooms }} h
  </p>
  <p>
    Neliömäärä: {{ listing.size|float|int if listing.size|float == listing.size|float|int else listing.size|string|replace(".", ",") }} m²
  </p>
  <p>
    Vuokrahinta: {{ listing.rent }} €
  </p>
  <p>
    Osoite: {{ listing.address }}, {{ listing.postcode }} {{ listing.municipality }}
  </p>
  <p>
    {% if listing.floor %}
      Kerros: {{ listing.floor }} / {{ listing.floors }}
    {% else %}
      Kerroksia: {{ listing.floors }}
    {% endif %}
  </p>
  <p>
    Kunto: {{ listing.condition }}
  </p>
  <p>
    Sauna: {{ "Kyllä" if listing.sauna else "Ei" }}
  </p>
  <p>
    Parveke: {{ "Kyllä" if listing.balcony else "Ei" }}
  </p>
  <p>
    Kuvaus:<br>
    {{ listing.description | replace("\n", "<br>") | safe }}
  </p>

   {% if listing.floor %}
  <h3>Taloyhtiön tiedot</h3>

  <p>
    Sauna: {{ "Kyllä" if listing.bath else "Ei" }}
  </p>
  <p>
    Hissi: {{ "Kyllä" if listing.elevator else "Ei" }}
  </p>
  <p>
    Pyykkitupa: {{ "Kyllä" if listing.laundry else "Ei" }}
  </p>
  <p>
    Häkkikellari: {{ "Kyllä" if listing.cellar else "Ei" }}
  </p>
  <p>
    Uima-allas: {{ "Kyllä" if listing.pool else "Ei" }}
  </p>
  {% endif %}

  <p>
  <a href="/">Takaisin</a>
  </p>
</body>

</html>