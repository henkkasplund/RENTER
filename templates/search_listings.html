{% extends "layout.html" %}

{% block title %}Etsi vuokrakohteita{% endblock %}

{% block content %}

<section class="medium">
  <h2>Etsi vuokrakohteita</h2>

  <form class="form-stack" action="/search_listings" method="get">

    <div class="grid grid-dual">

      <div>
        Asuntotyyppi
        <select name="property_type_id">
          <option value="">Kaikki</option>
          {% for property in property_types %}
            <option value="{{ property.id }}"
              {% if property_type_id == property.id|string %}selected{% endif %}>
              {{ property.value }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        Paikkakunta
        <select name="municipality_id">
          <option value="">Kaikki</option>
          {% for municipality in municipalities %}
            <option value="{{ municipality.id }}"
              {% if municipality_id == municipality.id|string %}selected{% endif %}>
              {{ municipality.value }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        Min vuokra
        <input type="text" name="min_rent" value="{{ min_rent }}">
      </div>

      <div>
        Max vuokra
        <input type="text" name="max_rent" value="{{ max_rent }}">
      </div>

      <div>
        Neliömäärä
        <input type="text" name="size" value="{{ size }}">
      </div>

      <div>
        Huonemäärä
        <select name="rooms_id">
          <option value="">Kaikki</option>
          {% for room in rooms %}
            <option value="{{ room.id }}"
              {% if rooms_id == room.id|string %}selected{% endif %}>
              {{ room.value }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        Kunto
        <select name="condition_id">
          <option value="">Kaikki</option>
          {% for condition in conditions %}
            <option value="{{ condition.id }}"
              {% if condition_id == condition.id|string %}selected{% endif %}>
              {{ condition.value }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        Ilmoittaja
        <input type="text" name="user" value="{{ user }}">
      </div>

    </div>

    <div class="center">
      <button type="submit">Suorita haku</button>
    </div>

  </form>
</section>

{% if searched %}
  <section class="wide">
    <h3>Tulokset</h3>

    {% if results %}
      <div class="grid grid-large">
        {% for listing in results %}
          <div class="listing-card">
            <a href="/listing/{{ listing.id }}">
              <h4>{{ listing.municipality }} {{ listing.rooms }}h</h4>
              <p>{{ listing.size }} m²</p>
              <p class="price">{{ listing.rent }} €</p>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>Hakuehdoilla ei löytynyt tuloksia</p>
    {% endif %}
  </section>
{% endif %}

{% endblock %}